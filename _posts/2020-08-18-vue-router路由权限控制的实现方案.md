---
categories:
 - vue
tags:
 - vue
 - vue-router
---
路由配置按用户类型分为**用户路由**和**基本路由**
 - 用户路由：当前用户所持有的路由
 - 基本路由：所有用户均可以访问的路由

实现控制方式分两种：
 - `addRoutes` 方法注入路由实现控制
 - `beforeEach` 钩子限制路由跳转

#### `addRoutes` 方式

通过请求服务端获取当前用户路由配置，编码为vue-router所支持的基本格式；然后调用 `this.$router.addRoutes` 方法将编码好的用户路由注入到现有的vue-router实例中去，以实现用户路由。

> `addRoutes` 方法仅仅是注入新的路由，但并没有剔除其它路由。所以路由中可能会存在两种用户类型的路由，解决方法是新建一个全新的Router，然后将新的 `Router.matcher` 赋给当前页面的管理Router，从而达到更新路由配置的目的。

#### `beforeEach` 方式

通过请求服务端获取当前用户路由配置，通过注册 `router.beforeEach` 钩子对路由的每次跳转进行管理，每次跳转都进行检查。如果目标路由不存在于基本路由和当前用户的用户路由中，则取消跳转，转为跳转至错误页。
